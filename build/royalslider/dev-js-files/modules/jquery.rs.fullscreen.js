(function(e){e.extend(e.rsProto,{_initFullscreen:function(){var t=this;t._fullscreenDefaults={enabled:!1,keyboardNav:!0,buttonFS:!0,nativeFS:!1,doubleTap:!0},t.st.fullscreen=e.extend({},t._fullscreenDefaults,t.st.fullscreen),t.st.fullscreen.enabled&&t.ev.one("rsBeforeSizeSet",function(){t._setupFullscreen()})},_setupFullscreen:function(){var t=this;t._fsKeyboard=!t.st.keyboardNavEnabled&&t.st.fullscreen.keyboardNav;if(t.st.fullscreen.nativeFS){t._fullScreenApi={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""};var n="webkit moz o ms khtml".split(" ");if(typeof document.cancelFullScreen!="undefined")t._fullScreenApi.supportsFullScreen=!0;else for(var r=0;r<n.length;r++){t._fullScreenApi.prefix=n[r];if(typeof document[t._fullScreenApi.prefix+"CancelFullScreen"]!="undefined"){t._fullScreenApi.supportsFullScreen=!0;break}}t._fullScreenApi.supportsFullScreen?(t._fullScreenApi.fullScreenEventName=t._fullScreenApi.prefix+"fullscreenchange.rs",t._fullScreenApi.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},t._fullScreenApi.requestFullScreen=function(e){return this.prefix===""?e.requestFullScreen():e[this.prefix+"RequestFullScreen"]()},t._fullScreenApi.cancelFullScreen=function(e){return this.prefix===""?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}):t._fullScreenApi=!1}t.st.fullscreen.buttonFS&&(t._fsBtn=e('<div class="rsFullscreenBtn"><div class="rsFullscreenIcn"></div></div>').appendTo(t.st.controlsInside?t._sliderOverflow:t.slider).on("click.rs",function(){t.isFullscreen?t.exitFullscreen():t.enterFullscreen()}))},enterFullscreen:function(t){var n=this;if(n._fullScreenApi){if(!t){n._doc.on(n._fullScreenApi.fullScreenEventName,function(e){n._fullScreenApi.isFullScreen()?n.enterFullscreen(!0):n.exitFullscreen(!0)}),n._fullScreenApi.requestFullScreen(e("html")[0]);return}n._fullScreenApi.requestFullScreen(e("html")[0])}if(n._isFullscreenUpdating)return;n._isFullscreenUpdating=!0,n._doc.on("keyup.rsfullscreen",function(e){e.keyCode===27&&n.exitFullscreen()}),n._fsKeyboard&&n._bindKeyboardNav(),n._htmlStyle=e("html").attr("style"),n._bodyStyle=e("body").attr("style"),n._sliderStyle=n.slider.attr("style"),e("body, html").css({overflow:"hidden",height:"100%",width:"100%",margin:"0",padding:"0"}),n.slider.addClass("rsFullscreen");var r,i;for(i=0;i<n.numSlides;i++){r=n.slides[i],r.isRendered=!1;if(r.bigImage){r.isMedLoaded=r.isLoaded,r.isMedLoading=r.isLoading,r.medImage=r.image,r.medIW=r.iW,r.medIH=r.iH,r.slideId=-99,r.bigImage!==r.medImage&&(r.sizeType="big"),r.isLoaded=r.isBigLoaded,r.isLoading=r.isBigLoading,r.image=r.bigImage,r.iW=r.bigIW,r.iH=r.bigIH,r.contentAdded=!1;var s=r.isLoaded?'<img class="rsImg" src="'+r.image+'"/>':'<a class="rsImg" href="'+r.image+'"></a>';r.content.hasClass("rsImg")?r.content=e(s):r.content.find(".rsImg").replaceWith(s)}}n.isFullscreen=!0,setTimeout(function(){n._isFullscreenUpdating=!1,n.updateSliderSize()},100)},exitFullscreen:function(t){var n=this;if(n._fullScreenApi){if(!t){n._fullScreenApi.cancelFullScreen(e("html")[0]);return}n._doc.off(n._fullScreenApi.fullScreenEventName)}if(n._isFullscreenUpdating)return;n._isFullscreenUpdating=!0,n._doc.off("keyup.rsfullscreen"),n._fsKeyboard&&n._doc.off("keydown.rskb"),e("html").attr("style",n._htmlStyle||""),e("body").attr("style",n._bodyStyle||""),n.slider.removeClass("rsFullscreen");var r,i;for(i=0;i<n.numSlides;i++){r=n.slides[i],r.isRendered=!1;if(r.bigImage){r.slideId=-99,r.isBigLoaded=r.isLoaded,r.isBigLoading=r.isLoading,r.bigImage=r.image,r.bigIW=r.iW,r.bigIH=r.iH,r.isLoaded=r.isMedLoaded,r.isLoading=r.isMedLoading,r.image=r.medImage,r.iW=r.medIW,r.iH=r.medIH,r.contentAdded=!1;var s=r.isLoaded?'<img class="rsImg" src="'+r.image+'"/>':'<a class="rsImg" href="'+r.image+'"></a>';r.content.hasClass("rsImg")?r.content=e(s):r.content.find(".rsImg").replaceWith(s),r.holder&&r.holder.html(r.content),r.bigImage!==r.medImage&&(r.sizeType="med")}}n.isFullscreen=!1,setTimeout(function(){n._isFullscreenUpdating=!1,n.updateSliderSize()},100)}}),e.rsModules.fullscreen=e.rsProto._initFullscreen})(jQuery);