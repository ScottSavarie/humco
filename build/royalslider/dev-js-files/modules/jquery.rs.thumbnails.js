(function(e){e.extend(e.rsProto,{_initThumbs:function(){var t=this;t.st.controlNavigation==="thumbnails"&&(t._thumbsDefaults={drag:!0,touch:!0,orientation:"horizontal",navigation:!0,arrows:!0,arrowLeft:null,arrowRight:null,spacing:4,arrowsAutoHide:!1,appendSpan:!1,transitionSpeed:600,autoCenter:!0,fitInViewport:!0,firstMargin:!0},t.st.thumbs=e.extend({},t._thumbsDefaults,t.st.thumbs),t.ev.on("rsBeforeParseNode",function(t,n,r){n=e(n),r.thumbnail=n.find(".rsTmb").remove(),r.thumbnail.length?r.thumbnail=e(document.createElement("div")).append(r.thumbnail).html():(r.thumbnail=n.attr("data-rsTmb"),r.thumbnail||(r.thumbnail=n.find(".rsImg").attr("data-rsTmb")),r.thumbnail?r.thumbnail='<img src="'+r.thumbnail+'"/>':r.thumbnail="")}),t.ev.one("rsAfterPropsSetup",function(){t._createThumbs()}),t.ev.on("rsOnUpdateNav",function(){var n=t.currSlideId,r,i;t._prevNavItem&&t._prevNavItem.removeClass("rsNavSelected"),r=e(t._controlNavItems[n]),r.addClass("rsNavSelected"),t._thumbsNavigation&&t._setCurrentThumb(n),t._prevNavItem=r}),t.ev.on("rsOnAppendSlide",function(e,n,r){var i="<div"+t._thumbsMargin+' class="rsNavItem rsThumb">'+t._addThumbHTML+n.thumbnail+"</div>";r>=t.numSlides?t._thumbsContainer.append(i):t._controlNavItems.eq(r).before(i),t._controlNavItems=t._thumbsContainer.children(),t.updateThumbsSize()}),t.ev.on("rsOnRemoveSlide",function(e,n){var r=t._controlNavItems.eq(n);r&&(r.remove(),t._controlNavItems=t._thumbsContainer.children(),t.updateThumbsSize())}))},_createThumbs:function(){var t=this,n="rsThumbs",r="",i,s,o=t.st.thumbs.spacing;t._controlNavEnabled=!0;if(o>0){var u=o+"px ";i=' style="margin: 0 '+u+u+'0;"'}else i="";t._thumbsMargin=i,t._thumbsHorizontal=t.st.thumbs.orientation==="vertical"?!1:!0,t._thumbsPosition=0,t._isThumbsAnimating=!1,t._thumbsDrag=!1,t._thumbsNavigation=!1,t._thumbsArrows=t.st.thumbs.arrows&&t.st.thumbs.navigation;var a=t._thumbsHorizontal?"Hor":"Ver";t.slider.addClass("rsWithThumbs rsWithThumbs"+a),r+='<div class="rsNav rsThumbs rsThumbs'+a+'"><div class="'+n+'Container">',t._addThumbHTML=t.st.thumbs.appendSpan?'<span class="thumbIco"></span>':"";for(var f=0;f<t.numSlides;f++)s=t.slides[f],r+="<div"+i+' class="rsNavItem rsThumb">'+t._addThumbHTML+s.thumbnail+"</div>";r+="</div></div>",r=e(r),t._thumbsContainer=e(r).find("."+n+"Container"),t._thumbsArrows&&(n+="Arrow",t.st.thumbs.arrowLeft?t._thumbsArrowLeft=t.st.thumbs.arrowLeft:(t._thumbsArrowLeft=e('<div class="'+n+" "+n+'Left"><div class="'+n+'Icn"></div></div>'),r.append(t._thumbsArrowLeft)),t.st.thumbs.arrowRight?t._thumbsArrowRight=t.st.thumbs.arrowRight:(t._thumbsArrowRight=e('<div class="'+n+" "+n+'Right"><div class="'+n+'Icn"></div></div>'),r.append(t._thumbsArrowRight)),t._thumbsArrowLeft.click(function(){var e=Math.floor(t._thumbsViewportSize/t._thumbSize),n=Math.floor(t._thumbsPosition/t._thumbSize),r=(n+t._visibleThumbsPerView)*t._thumbSize;t._animateThumbsTo(r>t._thumbsMinPosition?t._thumbsMinPosition:r)}),t._thumbsArrowRight.click(function(){var e=Math.floor(t._thumbsViewportSize/t._thumbSize),n=Math.floor(t._thumbsPosition/t._thumbSize),r=(n-t._visibleThumbsPerView)*t._thumbSize;t._animateThumbsTo(r<t._thumbsMaxPosition?t._thumbsMaxPosition:r)}),t.st.thumbs.arrowsAutoHide&&!t.hasTouch&&(t._thumbsArrowLeft.css("opacity",0),t._thumbsArrowRight.css("opacity",0),r.one("mousemove.rsarrowshover",function(){t._thumbsNavigation&&(t._thumbsArrowLeft.css("opacity",1),t._thumbsArrowRight.css("opacity",1))}),r.hover(function(){t._thumbsNavigation&&(t._thumbsArrowLeft.css("opacity",1),t._thumbsArrowRight.css("opacity",1))},function(){t._thumbsNavigation&&(t._thumbsArrowLeft.css("opacity",0),t._thumbsArrowRight.css("opacity",0))}))),t._controlNav=r,t._controlNavItems=t._thumbsContainer.children(),t.slider.append(r),t._thumbsEnabled=!0,t._thumbsSpacing=o,t.st.thumbs.navigation&&t._useCSS3Transitions&&t._thumbsContainer.css(t._vendorPref+"transition-property",t._vendorPref+"transform"),t._controlNav.click(function(n){if(!t._thumbsDrag){var r=e(n.target).closest(".rsNavItem");r.length&&t.goTo(r.index())}}),t.ev.off("rsBeforeSizeSet.thumbs").on("rsBeforeSizeSet.thumbs",function(){t._realWrapSize=t._thumbsHorizontal?t._wrapHeight:t._wrapWidth,t.updateThumbsSize()})},updateThumbsSize:function(){var e=this,t=e._controlNavItems.first(),n={},r=e._controlNavItems.length;e._thumbSize=(e._thumbsHorizontal?t.outerWidth():t.outerHeight())+e._thumbsSpacing,e._thumbsContainerSize=r*e._thumbSize-e._thumbsSpacing,n[e._thumbsHorizontal?"width":"height"]=e._thumbsContainerSize+e._thumbsSpacing,e._thumbsViewportSize=e._thumbsHorizontal?e._controlNav.width():e._controlNav.height(),e._thumbsMaxPosition=-(e._thumbsContainerSize-e._thumbsViewportSize)-(e.st.thumbs.firstMargin?e._thumbsSpacing:0),e._thumbsMinPosition=e.st.thumbs.firstMargin?e._thumbsSpacing:0,e._visibleThumbsPerView=Math.floor(e._thumbsViewportSize/e._thumbSize);if(e._thumbsContainerSize<e._thumbsViewportSize){e.st.thumbs.autoCenter&&e._setThumbsPosition((e._thumbsViewportSize-e._thumbsContainerSize)/2);if(e.st.thumbs.arrows&&e._thumbsArrowLeft){var i="rsThumbsArrowDisabled";e._thumbsArrowLeft.addClass(i),e._thumbsArrowRight.addClass(i)}e._thumbsNavigation=!1,e._thumbsDrag=!1,e._controlNav.off(e._downEvent)}else if(e.st.thumbs.navigation&&!e._thumbsNavigation){e._thumbsNavigation=!0;if(!e.hasTouch&&e.st.thumbs.drag||e.hasTouch&&e.st.thumbs.touch)e._thumbsDrag=!0,e._controlNav.on(e._downEvent,function(t){e._onDragStart(t,!0)})}e._thumbsContainer.css(n),e._thumbsEnabled&&(e.isFullscreen||e.st.thumbs.fitInViewport)&&(e._thumbsHorizontal?e._wrapHeight=e._realWrapSize-e._controlNav.outerHeight():e._wrapWidth=e._realWrapSize-e._controlNav.outerWidth())},setThumbsOrientation:function(e,t){var n=this;n._thumbsEnabled&&(n.st.thumbs.orientation=e,n._controlNav.remove(),n.slider.removeClass("rsWithThumbsHor rsWithThumbsVer"),n._createThumbs(),n._controlNav.off(n._downEvent),t||n.updateSliderSize(!0))},_setThumbsPosition:function(e){var t=this;t._thumbsPosition=e,t._useCSS3Transitions?t._thumbsContainer.css(t._xProp,t._tPref1+(t._thumbsHorizontal?e+t._tPref2+0:0+t._tPref2+e)+t._tPref3):t._thumbsContainer.css(t._thumbsHorizontal?t._xProp:t._yProp,e)},_animateThumbsTo:function(t,n,r,i,s){var o=this;if(!o._thumbsNavigation)return;n||(n=o.st.thumbs.transitionSpeed),o._thumbsPosition=t,o._thumbsAnimTimeout&&clearTimeout(o._thumbsAnimTimeout),o._isThumbsAnimating&&(o._useCSS3Transitions||o._thumbsContainer.stop(),r=!0);var u={};o._isThumbsAnimating=!0,o._useCSS3Transitions?(u[o._vendorPref+"transition-duration"]=n+"ms",u[o._vendorPref+"transition-timing-function"]=r?e.rsCSS3Easing[o.st.easeOut]:e.rsCSS3Easing[o.st.easeInOut],o._thumbsContainer.css(u),o._setThumbsPosition(t)):(u[o._thumbsHorizontal?o._xProp:o._yProp]=t+"px",o._thumbsContainer.animate(u,n,r?"easeOutCubic":o.st.easeInOut)),i&&(o._thumbsPosition=i),o._updateThumbsArrows(),o._thumbsAnimTimeout=setTimeout(function(){o._isThumbsAnimating=!1,s&&(o._animateThumbsTo(i,s,!0),s=null)},n)},_updateThumbsArrows:function(){var e=this;if(e._thumbsArrows){var t="rsThumbsArrowDisabled";e._thumbsPosition===e._thumbsMinPosition?e._thumbsArrowLeft.addClass(t):e._thumbsArrowLeft.removeClass(t),e._thumbsPosition===e._thumbsMaxPosition?e._thumbsArrowRight.addClass(t):e._thumbsArrowRight.removeClass(t)}},_setCurrentThumb:function(e,t){var n=this,r=0,i,s=e*n._thumbSize+n._thumbSize*2-n._thumbsSpacing+n._thumbsMinPosition,o=Math.floor(n._thumbsPosition/n._thumbSize);if(!n._thumbsNavigation)return;s+n._thumbsPosition>n._thumbsViewportSize?(e===n.numSlides-1&&(r=1),o=-e+n._visibleThumbsPerView-2+r,i=o*n._thumbSize+n._thumbsViewportSize%n._thumbSize+n._thumbsSpacing-n._thumbsMinPosition):e!==0?(e-1)*n._thumbSize<=-n._thumbsPosition+n._thumbsMinPosition&&e-1<=n.numSlides-n._visibleThumbsPerView&&(o=-e+1,i=o*n._thumbSize+n._thumbsMinPosition):(o=0,i=n._thumbsMinPosition);if(i!==n._thumbsPosition){var u=i===undefined?n._thumbsPosition:i;u>n._thumbsMinPosition?n._setThumbsPosition(n._thumbsMinPosition):u<n._thumbsMaxPosition?n._setThumbsPosition(n._thumbsMaxPosition):i!==undefined&&(t?n._setThumbsPosition(i):n._animateThumbsTo(i))}n._updateThumbsArrows()}}),e.rsModules.thumbnails=e.rsProto._initThumbs})(jQuery);