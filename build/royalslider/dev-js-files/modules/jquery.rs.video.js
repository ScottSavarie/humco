(function(e){e.extend(e.rsProto,{_initVideo:function(){var t=this;t._videoDefaults={autoHideArrows:!0,autoHideControlNav:!1,autoHideBlocks:!1,youTubeCode:'<iframe src="http://www.youtube.com/embed/%id%?rel=1&autoplay=1&showinfo=0&autoplay=1" frameborder="no"></iframe>',vimeoCode:'<iframe src="http://player.vimeo.com/video/%id%?byline=0&amp;portrait=0&amp;autoplay=1" frameborder="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},t.st.video=e.extend({},t._videoDefaults,t.st.video),t.ev.on("rsBeforeSizeSet",function(){t._isVideoPlaying&&setTimeout(function(){var e=t._currHolder;e=e.hasClass("rsVideoContainer")?e:e.find(".rsVideoContainer"),t._videoFrameHolder.css({width:e.width(),height:e.height()})},32)});var n=e.browser.mozilla;t.ev.on("rsAfterParseNode",function(r,i,s){var o=e(i),u,a;if(s.videoURL){!a&&n&&(a=!0,t._useCSS3Transitions=t._use3dTransform=!1);var f=e('<div class="rsVideoContainer"></div>'),l=e('<div class="rsBtnCenterer"><div class="rsPlayBtn"><div class="rsPlayBtnIcon"></div></div></div>');o.hasClass("rsImg")?s.content=f.append(o).append(l):s.content.find(".rsImg").wrap(f).after(l)}})},toggleVideo:function(){var e=this;return e._isVideoPlaying?e.stopVideo():e.playVideo()},playVideo:function(){var t=this;if(!t._isVideoPlaying){var n=t.currSlide;if(!n.videoURL)return!1;var r=t._currVideoContent=n.content,i=n.videoURL,s,o,u;i.match(/youtu\.be/i)||i.match(/youtube\.com\/watch/i)?(o=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,u=i.match(o),u&&u[7].length==11&&(s=u[7]),s!==undefined&&(t._videoFrameHolder=t.st.video.youTubeCode.replace("%id%",s))):i.match(/vimeo\.com/i)&&(o=/\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,u=i.match(o),u&&(s=u[2]),s!==undefined&&(t._videoFrameHolder=t.st.video.vimeoCode.replace("%id%",s))),t.videoObj=e(t._videoFrameHolder),t.ev.trigger("rsOnCreateVideoElement",[i]);if(t.videoObj.length){t._videoFrameHolder=e('<div class="rsVideoFrameHolder"><div class="rsPreloader"></div><div class="rsCloseVideoBtn"><div class="rsCloseVideoIcn"></div></div></div>'),t._videoFrameHolder.find(".rsPreloader").after(t.videoObj);var r=r.hasClass("rsVideoContainer")?r:r.find(".rsVideoContainer");t._videoFrameHolder.css({width:r.width(),height:r.height()}).find(".rsCloseVideoBtn").off("click.rsv").on("click.rsv",function(e){return t.stopVideo(),e.preventDefault(),e.stopPropagation(),!1}),r.append(t._videoFrameHolder),t.isIPAD&&r.addClass("rsIOSVideo"),t._arrowLeft&&t.st.video.autoHideArrows&&(t._arrowLeft.addClass("rsHidden"),t._arrowRight.addClass("rsHidden"),t._arrowsAutoHideLocked=!0),t._controlNav&&t.st.video.autoHideControlNav&&t._controlNav.addClass("rsHidden"),t.st.video.autoHideBlocks&&t.currSlide.animBlocks&&t.currSlide.animBlocks.addClass("rsHidden"),setTimeout(function(){t._videoFrameHolder.addClass("rsVideoActive")},10),t.ev.trigger("rsVideoPlay"),t._isVideoPlaying=!0}return!0}return!1},stopVideo:function(){var e=this;return e._isVideoPlaying?(e.isIPAD&&e.slider.find(".rsCloseVideoBtn").remove(),e._arrowLeft&&e.st.video.autoHideArrows&&(e._arrowLeft.removeClass("rsHidden"),e._arrowRight.removeClass("rsHidden"),e._arrowsAutoHideLocked=!1),e._controlNav&&e.st.video.autoHideControlNav&&e._controlNav.removeClass("rsHidden"),e.st.video.autoHideBlocks&&e.currSlide.animBlocks&&e.currSlide.animBlocks.removeClass("rsHidden"),setTimeout(function(){e.ev.trigger("rsOnDestroyVideoElement",[e.videoObj]),e._videoFrameHolder.remove()},16),e.ev.trigger("rsVideoStop"),e._isVideoPlaying=!1,!0):!1}}),e.rsModules.video=e.rsProto._initVideo})(jQuery);